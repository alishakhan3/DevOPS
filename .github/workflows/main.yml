name: Docker Image

on:
  workflow_dispatch:
    inputs:
      name:
        type: choice
        description: "Select a docker image to deploy"
        options:
          - "nginx"
          - "httpd"
          - "mysql"
          - "postgres"
          - "redis"

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Fetch Docker image name
        id: fetch_image
        run: |
          images=("nginx" "httpd" "mysql" "postgres" "redis")
          selected_image=${images[${{ github.event.inputs.option }} - 1]}
          echo "::set-output name=image::$selected_image"

          if [ ${{ github.event.inputs.option }} == 'nginx' ]; then
            selected_image=${images[0]}
            echo "::set-output name=image::$selected_image"
          elif [ ${{ github.event.inputs.option }} == 'httpd' ]; then
            selected_image=${images[1]}
            echo "::set-output name=image::$selected_image"
          elif [ ${{ github.event.inputs.option }} == 'mysql' ]; then
            selected_image=${images[2]}
            echo "::set-output name=image::$selected_image"
          elif [ ${{ github.event.inputs.option }} == 'postgres' ]; then
            selected_image=${images[3]}
            echo "::set-output name=image::$selected_image"
          elif [ ${{ github.event.inputs.option }} == 'redis' ]; then
            selected_image=${images[4]}
            echo "::set-output name=image::$selected_image"
          else
            echo "Invalid Choice"
          fi

      - name: Deploy Docker Image
        run: docker run -d ${{ steps.fetch_image.outputs.image }}
